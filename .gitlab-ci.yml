stages:
  - build
  - deploy

build-app:
  image: node:10.11-alpine
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
    - node_modules/
  tags:
    - docker
  stage: deploy
  script:
    - npm i
    - npm run build --prod
  artifacts:
    path:
      - dist/front-end

deploy-app:
  tags:
    - bare
  script:
    - ls -l dist